{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { threads as mockThreads } from \"../data/threads\";\nexport function useThreads() {\n  _s();\n  var _initial$0$thread_id, _initial$, _threads$find;\n  // load threads from localStorage first, then fall back to mockThreads\n  const stored = typeof window !== \"undefined\" ? localStorage.getItem(\"ai_threads\") : null;\n  const initial = stored ? JSON.parse(stored) : mockThreads;\n  const [threads, setThreads] = useState(initial);\n  const [activeThreadId, setActiveThreadId] = useState((_initial$0$thread_id = (_initial$ = initial[0]) === null || _initial$ === void 0 ? void 0 : _initial$.thread_id) !== null && _initial$0$thread_id !== void 0 ? _initial$0$thread_id : null);\n\n  // Listen for user changes (sign-out / sign-in) to reset threads when needed.\n  // This ensures that clearing localStorage on sign-out returns the UI to\n  // the first-time experience without requiring a full page reload.\n  if (typeof window !== 'undefined') {\n    window.addEventListener('ai_user_changed', () => {\n      try {\n        var _nxt$0$thread_id, _nxt$;\n        const s = localStorage.getItem('ai_threads');\n        const nxt = s ? JSON.parse(s) : mockThreads;\n        setThreads(nxt);\n        setActiveThreadId((_nxt$0$thread_id = (_nxt$ = nxt[0]) === null || _nxt$ === void 0 ? void 0 : _nxt$.thread_id) !== null && _nxt$0$thread_id !== void 0 ? _nxt$0$thread_id : null);\n      } catch (e) {\n        var _mockThreads$0$thread, _mockThreads$;\n        setThreads(mockThreads);\n        setActiveThreadId((_mockThreads$0$thread = (_mockThreads$ = mockThreads[0]) === null || _mockThreads$ === void 0 ? void 0 : _mockThreads$.thread_id) !== null && _mockThreads$0$thread !== void 0 ? _mockThreads$0$thread : null);\n      }\n    });\n  }\n  const activeThread = (_threads$find = threads.find(t => t.thread_id === activeThreadId)) !== null && _threads$find !== void 0 ? _threads$find : null;\n  function persist(next) {\n    setThreads(next);\n    try {\n      localStorage.setItem(\"ai_threads\", JSON.stringify(next));\n    } catch (e) {}\n  }\n  function addThread(title, description = \"\") {\n    const id = `t${Date.now()}`;\n    const now = new Date().toISOString();\n    const t = {\n      thread_id: id,\n      title,\n      description,\n      status: \"active\",\n      created_at: now,\n      last_active_at: now\n    };\n    const next = [t, ...threads];\n    persist(next);\n    setActiveThreadId(id);\n    return t;\n  }\n  return {\n    threads,\n    activeThread,\n    activeThreadId,\n    setActiveThreadId,\n    addThread\n  };\n}\n_s(useThreads, \"1CLU9BGlukaw9/IIT+E3k65jzIs=\");","map":{"version":3,"names":["useState","threads","mockThreads","useThreads","_s","_initial$0$thread_id","_initial$","_threads$find","stored","window","localStorage","getItem","initial","JSON","parse","setThreads","activeThreadId","setActiveThreadId","thread_id","addEventListener","_nxt$0$thread_id","_nxt$","s","nxt","e","_mockThreads$0$thread","_mockThreads$","activeThread","find","t","persist","next","setItem","stringify","addThread","title","description","id","Date","now","toISOString","status","created_at","last_active_at"],"sources":["/Users/ankurporwal/Documents/AIConsultation/Frontend/src/hooks/useThreads.ts"],"sourcesContent":["import { useState } from \"react\";\nimport { threads as mockThreads } from \"../data/threads\";\nimport { Thread } from \"../types/thinking\";\n\nexport function useThreads() {\n  // load threads from localStorage first, then fall back to mockThreads\n  const stored = typeof window !== \"undefined\" ? localStorage.getItem(\"ai_threads\") : null;\n  const initial = stored ? (JSON.parse(stored) as Thread[]) : mockThreads;\n\n  const [threads, setThreads] = useState<Thread[]>(initial);\n  const [activeThreadId, setActiveThreadId] = useState<string | null>(\n    initial[0]?.thread_id ?? null\n  );\n\n  // Listen for user changes (sign-out / sign-in) to reset threads when needed.\n  // This ensures that clearing localStorage on sign-out returns the UI to\n  // the first-time experience without requiring a full page reload.\n  if (typeof window !== 'undefined') {\n    window.addEventListener('ai_user_changed', () => {\n      try {\n        const s = localStorage.getItem('ai_threads');\n        const nxt = s ? JSON.parse(s) as Thread[] : mockThreads;\n        setThreads(nxt);\n        setActiveThreadId(nxt[0]?.thread_id ?? null);\n      } catch (e) {\n        setThreads(mockThreads);\n        setActiveThreadId(mockThreads[0]?.thread_id ?? null);\n      }\n    });\n  }\n\n  const activeThread = threads.find((t) => t.thread_id === activeThreadId) ?? null;\n\n  function persist(next: Thread[]) {\n    setThreads(next);\n    try {\n      localStorage.setItem(\"ai_threads\", JSON.stringify(next));\n    } catch (e) {}\n  }\n\n  function addThread(title: string, description = \"\") {\n    const id = `t${Date.now()}`;\n    const now = new Date().toISOString();\n    const t: Thread = { thread_id: id, title, description, status: \"active\", created_at: now, last_active_at: now };\n    const next = [t, ...threads];\n    persist(next);\n    setActiveThreadId(id);\n    return t;\n  }\n\n  return {\n    threads,\n    activeThread,\n    activeThreadId,\n    setActiveThreadId,\n    addThread,\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
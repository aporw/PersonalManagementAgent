{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\n\n// Lightweight focus trap that targets an existing DOM container by selector.\n// When active it:\n// - focuses the first focusable element inside the container\n// - traps Tab/Shift+Tab inside the container\n// - sets aria-hidden on other direct children of <body> to improve screen-reader behavior\nexport default function FocusTrap({\n  active,\n  containerSelector\n}) {\n  _s();\n  const prevFocused = useRef(null);\n  const hiddenNodes = useRef([]);\n  useEffect(() => {\n    if (!active) return undefined;\n    try {\n      prevFocused.current = document.activeElement;\n      const container = document.querySelector(containerSelector);\n      if (!container) return undefined;\n\n      // mark other body children as aria-hidden (but not overlays or the container itself)\n      const children = Array.from(document.body.children || []);\n      hiddenNodes.current = [];\n      children.forEach(c => {\n        if (c === container) return;\n        // allow overlays shared by drawers/bottom-sheets (class overlay or modal-backdrop)\n        if (c.classList && (c.classList.contains('overlay') || c.classList.contains('modal-backdrop') || c.classList.contains('bottom-sheet'))) return;\n        try {\n          if (!c.hasAttribute('aria-hidden')) {\n            c.setAttribute('aria-hidden', 'true');\n            hiddenNodes.current.push(c);\n          }\n        } catch (e) {}\n      });\n\n      // focus first focusable element inside container, or container itself\n      const focusable = container.querySelectorAll(\"a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex='-1'])\");\n      const first = focusable && focusable.length ? focusable[0] : null;\n      try {\n        (first || container).focus();\n      } catch (e) {}\n      function onKey(e) {\n        if (e.key !== 'Tab') return;\n        const focusableEls = Array.from(container.querySelectorAll(\"a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex='-1'])\")).filter(Boolean);\n        if (!focusableEls.length) {\n          e.preventDefault();\n          return;\n        }\n        const firstEl = focusableEls[0];\n        const lastEl = focusableEls[focusableEls.length - 1];\n        if (!e.shiftKey && document.activeElement === lastEl) {\n          e.preventDefault();\n          firstEl.focus();\n        } else if (e.shiftKey && document.activeElement === firstEl) {\n          e.preventDefault();\n          lastEl.focus();\n        }\n      }\n      document.addEventListener('keydown', onKey);\n      return () => {\n        document.removeEventListener('keydown', onKey);\n        // restore aria-hidden\n        try {\n          hiddenNodes.current.forEach(n => n.removeAttribute('aria-hidden'));\n        } catch (e) {}\n        // restore focus\n        try {\n          prevFocused.current && prevFocused.current.focus();\n        } catch (e) {}\n      };\n    } catch (e) {\n      return undefined;\n    }\n  }, [active, containerSelector]);\n  return null;\n}\n_s(FocusTrap, \"D4QQsWNhwt9MWavHNHmadgTNz3k=\");\n_c = FocusTrap;\nvar _c;\n$RefreshReg$(_c, \"FocusTrap\");","map":{"version":3,"names":["useEffect","useRef","FocusTrap","active","containerSelector","_s","prevFocused","hiddenNodes","undefined","current","document","activeElement","container","querySelector","children","Array","from","body","forEach","c","classList","contains","hasAttribute","setAttribute","push","e","focusable","querySelectorAll","first","length","focus","onKey","key","focusableEls","filter","Boolean","preventDefault","firstEl","lastEl","shiftKey","addEventListener","removeEventListener","n","removeAttribute","_c","$RefreshReg$"],"sources":["/Users/ankurporwal/Documents/PersonalManagementAgent/Frontend/src/utils/FocusTrap.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\n\n// Lightweight focus trap that targets an existing DOM container by selector.\n// When active it:\n// - focuses the first focusable element inside the container\n// - traps Tab/Shift+Tab inside the container\n// - sets aria-hidden on other direct children of <body> to improve screen-reader behavior\nexport default function FocusTrap({ active, containerSelector }) {\n  const prevFocused = useRef(null);\n  const hiddenNodes = useRef([]);\n\n  useEffect(() => {\n    if (!active) return undefined;\n    try {\n      prevFocused.current = document.activeElement;\n      const container = document.querySelector(containerSelector);\n      if (!container) return undefined;\n\n      // mark other body children as aria-hidden (but not overlays or the container itself)\n      const children = Array.from(document.body.children || []);\n      hiddenNodes.current = [];\n      children.forEach((c) => {\n        if (c === container) return;\n        // allow overlays shared by drawers/bottom-sheets (class overlay or modal-backdrop)\n        if (c.classList && (c.classList.contains('overlay') || c.classList.contains('modal-backdrop') || c.classList.contains('bottom-sheet'))) return;\n        try {\n          if (!c.hasAttribute('aria-hidden')) {\n            c.setAttribute('aria-hidden', 'true');\n            hiddenNodes.current.push(c);\n          }\n        } catch (e) {}\n      });\n\n      // focus first focusable element inside container, or container itself\n      const focusable = container.querySelectorAll(\"a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex='-1'])\");\n      const first = focusable && focusable.length ? focusable[0] : null;\n      try {\n        (first || container).focus();\n      } catch (e) {}\n\n      function onKey(e) {\n        if (e.key !== 'Tab') return;\n        const focusableEls = Array.from(container.querySelectorAll(\"a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex='-1'])\")).filter(Boolean);\n        if (!focusableEls.length) {\n          e.preventDefault();\n          return;\n        }\n        const firstEl = focusableEls[0];\n        const lastEl = focusableEls[focusableEls.length - 1];\n        if (!e.shiftKey && document.activeElement === lastEl) {\n          e.preventDefault();\n          (firstEl).focus();\n        } else if (e.shiftKey && document.activeElement === firstEl) {\n          e.preventDefault();\n          (lastEl).focus();\n        }\n      }\n\n      document.addEventListener('keydown', onKey);\n\n      return () => {\n        document.removeEventListener('keydown', onKey);\n        // restore aria-hidden\n        try {\n          hiddenNodes.current.forEach((n) => n.removeAttribute('aria-hidden'));\n        } catch (e) {}\n        // restore focus\n        try { prevFocused.current && prevFocused.current.focus(); } catch (e) {}\n      };\n    } catch (e) {\n      return undefined;\n    }\n  }, [active, containerSelector]);\n\n  return null;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
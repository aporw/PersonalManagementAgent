{"ast":null,"code":"var _s = $RefreshSig$();\nimport { sessionSummaries } from \"../data/sessionSummaries\";\nimport { useEffect, useState } from \"react\";\nconst API_BASE = typeof window !== \"undefined\" && window.API_BASE || process.env.REACT_APP_API_BASE || \"http://localhost:8000\";\nexport function useSessionSummary(sessionId) {\n  _s();\n  const [summary, setSummary] = useState(null);\n  useEffect(() => {\n    let mounted = true;\n    if (!sessionId) {\n      setSummary(null);\n      return;\n    }\n    try {\n      const uid = typeof window !== \"undefined\" ? localStorage.getItem(\"user_id\") : null;\n      if (!uid || uid.startsWith(\"anon_\")) {\n        // fallback to static summaries for anonymous users\n        const s = sessionSummaries.find(ss => ss.session_id === sessionId) || null;\n        setSummary(s);\n        return;\n      }\n      (async () => {\n        try {\n          const uid = localStorage.getItem(\"user_id\");\n          // sessionId is used as thread id in this app\n          const resp = await fetch(`${API_BASE}/summary/saved/${encodeURIComponent(uid)}/${encodeURIComponent(sessionId)}`);\n          if (!mounted) return;\n          if (!resp.ok) {\n            const s = sessionSummaries.find(ss => ss.session_id === sessionId) || null;\n            setSummary(s);\n            return;\n          }\n          const data = await resp.json();\n          const serverSummary = data.summary || null;\n          setSummary(serverSummary);\n        } catch (e) {\n          const s = sessionSummaries.find(ss => ss.session_id === sessionId) || null;\n          setSummary(s);\n        }\n      })();\n    } catch (e) {\n      setSummary(null);\n    }\n    return () => {\n      mounted = false;\n    };\n  }, [sessionId]);\n  return {\n    summary\n  };\n}\n_s(useSessionSummary, \"lKGhItSa883pfTQ2Pj3nIYHV1As=\");","map":{"version":3,"names":["sessionSummaries","useEffect","useState","API_BASE","window","process","env","REACT_APP_API_BASE","useSessionSummary","sessionId","_s","summary","setSummary","mounted","uid","localStorage","getItem","startsWith","s","find","ss","session_id","resp","fetch","encodeURIComponent","ok","data","json","serverSummary","e"],"sources":["/Users/ankurporwal/Documents/AIConsultation/Frontend/src/hooks/useSessionSummary.ts"],"sourcesContent":["import { sessionSummaries } from \"../data/sessionSummaries\";\nimport { SessionSummary } from \"../types/thinking\";\nimport { useEffect, useState } from \"react\";\n\nconst API_BASE = (typeof window !== \"undefined\" && (window as any).API_BASE) || (process.env.REACT_APP_API_BASE as string) || \"http://localhost:8000\";\n\nexport function useSessionSummary(sessionId?: string) {\n  const [summary, setSummary] = useState<SessionSummary | null>(null);\n\n  useEffect(() => {\n    let mounted = true;\n    if (!sessionId) {\n      setSummary(null);\n      return;\n    }\n\n    try {\n      const uid = typeof window !== \"undefined\" ? localStorage.getItem(\"user_id\") : null;\n      if (!uid || uid.startsWith(\"anon_\")) {\n        // fallback to static summaries for anonymous users\n        const s = sessionSummaries.find((ss) => ss.session_id === sessionId) || null;\n        setSummary(s as SessionSummary | null);\n        return;\n      }\n\n      (async () => {\n        try {\n          const uid = localStorage.getItem(\"user_id\")!;\n          // sessionId is used as thread id in this app\n          const resp = await fetch(`${API_BASE}/summary/saved/${encodeURIComponent(uid)}/${encodeURIComponent(sessionId)}`);\n          if (!mounted) return;\n          if (!resp.ok) {\n            const s = sessionSummaries.find((ss) => ss.session_id === sessionId) || null;\n            setSummary(s as SessionSummary | null);\n            return;\n          }\n          const data = await resp.json();\n          const serverSummary = data.summary || null;\n          setSummary(serverSummary as SessionSummary | null);\n        } catch (e) {\n          const s = sessionSummaries.find((ss) => ss.session_id === sessionId) || null;\n          setSummary(s as SessionSummary | null);\n        }\n      })();\n    } catch (e) {\n      setSummary(null);\n    }\n\n    return () => { mounted = false; };\n  }, [sessionId]);\n\n  return { summary };\n}\n"],"mappings":";AAAA,SAASA,gBAAgB,QAAQ,0BAA0B;AAE3D,SAASC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,MAAMC,QAAQ,GAAI,OAAOC,MAAM,KAAK,WAAW,IAAKA,MAAM,CAASD,QAAQ,IAAME,OAAO,CAACC,GAAG,CAACC,kBAA6B,IAAI,uBAAuB;AAErJ,OAAO,SAASC,iBAAiBA,CAACC,SAAkB,EAAE;EAAAC,EAAA;EACpD,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAwB,IAAI,CAAC;EAEnED,SAAS,CAAC,MAAM;IACd,IAAIY,OAAO,GAAG,IAAI;IAClB,IAAI,CAACJ,SAAS,EAAE;MACdG,UAAU,CAAC,IAAI,CAAC;MAChB;IACF;IAEA,IAAI;MACF,MAAME,GAAG,GAAG,OAAOV,MAAM,KAAK,WAAW,GAAGW,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,GAAG,IAAI;MAClF,IAAI,CAACF,GAAG,IAAIA,GAAG,CAACG,UAAU,CAAC,OAAO,CAAC,EAAE;QACnC;QACA,MAAMC,CAAC,GAAGlB,gBAAgB,CAACmB,IAAI,CAAEC,EAAE,IAAKA,EAAE,CAACC,UAAU,KAAKZ,SAAS,CAAC,IAAI,IAAI;QAC5EG,UAAU,CAACM,CAA0B,CAAC;QACtC;MACF;MAEA,CAAC,YAAY;QACX,IAAI;UACF,MAAMJ,GAAG,GAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAE;UAC5C;UACA,MAAMM,IAAI,GAAG,MAAMC,KAAK,CAAC,GAAGpB,QAAQ,kBAAkBqB,kBAAkB,CAACV,GAAG,CAAC,IAAIU,kBAAkB,CAACf,SAAS,CAAC,EAAE,CAAC;UACjH,IAAI,CAACI,OAAO,EAAE;UACd,IAAI,CAACS,IAAI,CAACG,EAAE,EAAE;YACZ,MAAMP,CAAC,GAAGlB,gBAAgB,CAACmB,IAAI,CAAEC,EAAE,IAAKA,EAAE,CAACC,UAAU,KAAKZ,SAAS,CAAC,IAAI,IAAI;YAC5EG,UAAU,CAACM,CAA0B,CAAC;YACtC;UACF;UACA,MAAMQ,IAAI,GAAG,MAAMJ,IAAI,CAACK,IAAI,CAAC,CAAC;UAC9B,MAAMC,aAAa,GAAGF,IAAI,CAACf,OAAO,IAAI,IAAI;UAC1CC,UAAU,CAACgB,aAAsC,CAAC;QACpD,CAAC,CAAC,OAAOC,CAAC,EAAE;UACV,MAAMX,CAAC,GAAGlB,gBAAgB,CAACmB,IAAI,CAAEC,EAAE,IAAKA,EAAE,CAACC,UAAU,KAAKZ,SAAS,CAAC,IAAI,IAAI;UAC5EG,UAAU,CAACM,CAA0B,CAAC;QACxC;MACF,CAAC,EAAE,CAAC;IACN,CAAC,CAAC,OAAOW,CAAC,EAAE;MACVjB,UAAU,CAAC,IAAI,CAAC;IAClB;IAEA,OAAO,MAAM;MAAEC,OAAO,GAAG,KAAK;IAAE,CAAC;EACnC,CAAC,EAAE,CAACJ,SAAS,CAAC,CAAC;EAEf,OAAO;IAAEE;EAAQ,CAAC;AACpB;AAACD,EAAA,CA9CeF,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
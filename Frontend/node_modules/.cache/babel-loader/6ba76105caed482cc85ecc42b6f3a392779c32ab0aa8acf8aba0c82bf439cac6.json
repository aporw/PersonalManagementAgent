{"ast":null,"code":"var _jsxFileName = \"/Users/ankurporwal/Documents/PersonalManagementAgent/Frontend/src/pages/ThinkingPartnerPage.tsx\",\n  _s = $RefreshSig$();\nimport { useThreads } from \"../hooks/useThreads\";\nimport { useCurrentSession } from \"../hooks/useCurrentSession\";\nimport { useSessionSummary } from \"../hooks/useSessionSummary\";\nimport { useUserPreferences } from \"../hooks/useUserPreferences\";\nimport React from \"react\";\nimport ChatPanel from \"../components/chat/ChatPanel\";\nimport RightPanel from \"../components/layout/RightPanel\";\nimport MobileLanding from \"./MobileLanding\";\nimport { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ThinkingPartnerPage() {\n  _s();\n  // ðŸ§  STATE OWNERSHIP LIVES HERE\n  const {\n    threads,\n    activeThread,\n    setActiveThreadId,\n    addThread\n  } = useThreads();\n  const {\n    session\n  } = useCurrentSession(activeThread === null || activeThread === void 0 ? void 0 : activeThread.thread_id);\n  const {\n    summary\n  } = useSessionSummary(session === null || session === void 0 ? void 0 : session.session_id);\n  const preferences = useUserPreferences();\n\n  // show landing page first (left-panel style) on all viewports until user enters\n  const [entered, setEntered] = useState(false);\n  const [rightOverlayOpen, setRightOverlayOpen] = useState(false);\n  const [isNarrow, setIsNarrow] = useState(false);\n  useEffect(() => {\n    function check() {\n      try {\n        setIsNarrow(window.innerWidth <= 600);\n      } catch (e) {\n        setIsNarrow(false);\n      }\n    }\n    check();\n    window.addEventListener('resize', check);\n    return () => window.removeEventListener('resize', check);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: !entered ? /*#__PURE__*/_jsxDEV(MobileLanding, {\n      threads: threads,\n      onSelect: tid => {\n        setActiveThreadId(tid);\n        setEntered(true);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-layout\",\n      style: {\n        display: 'grid',\n        gridTemplateColumns: !isNarrow && rightOverlayOpen ? '1fr minmax(240px, 38vw)' : '1fr',\n        gap: 12,\n        alignItems: 'start',\n        padding: 0,\n        transition: 'grid-template-columns 260ms ease'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: 12,\n          minWidth: 0\n        },\n        children: /*#__PURE__*/_jsxDEV(ChatPanel, {\n          activeThread: activeThread,\n          session: session,\n          preferences: preferences,\n          onOpenRight: () => setRightOverlayOpen(s => !s)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this), !isNarrow ? rightOverlayOpen ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: 12,\n          minWidth: 0\n        },\n        children: /*#__PURE__*/_jsxDEV(RightPanel, {\n          mode: session === null || session === void 0 ? void 0 : session.detected_mode,\n          summary: summary\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 15\n      }, this) : null :\n      // on narrow screens, render overlay when open\n      rightOverlayOpen ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mobile-right-overlay\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"overlay open\",\n          onClick: () => setRightOverlayOpen(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mobile-right-drawer\",\n          children: [/*#__PURE__*/_jsxDEV(RightPanel, {\n            mode: session === null || session === void 0 ? void 0 : session.detected_mode,\n            summary: summary\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: 8\n            },\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"prompt-btn\",\n              onClick: () => setRightOverlayOpen(false),\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 15\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_s(ThinkingPartnerPage, \"jO13JAIo047OyHZs2HKbqtPUz14=\", false, function () {\n  return [useThreads, useCurrentSession, useSessionSummary, useUserPreferences];\n});\n_c = ThinkingPartnerPage;\nvar _c;\n$RefreshReg$(_c, \"ThinkingPartnerPage\");","map":{"version":3,"names":["useThreads","useCurrentSession","useSessionSummary","useUserPreferences","React","ChatPanel","RightPanel","MobileLanding","useState","useEffect","jsxDEV","_jsxDEV","ThinkingPartnerPage","_s","threads","activeThread","setActiveThreadId","addThread","session","thread_id","summary","session_id","preferences","entered","setEntered","rightOverlayOpen","setRightOverlayOpen","isNarrow","setIsNarrow","check","window","innerWidth","e","addEventListener","removeEventListener","children","onSelect","tid","fileName","_jsxFileName","lineNumber","columnNumber","className","style","display","gridTemplateColumns","gap","alignItems","padding","transition","minWidth","onOpenRight","s","mode","detected_mode","onClick","marginTop","_c","$RefreshReg$"],"sources":["/Users/ankurporwal/Documents/PersonalManagementAgent/Frontend/src/pages/ThinkingPartnerPage.tsx"],"sourcesContent":["import { useThreads } from \"../hooks/useThreads\";\nimport { useCurrentSession } from \"../hooks/useCurrentSession\";\nimport { useSessionSummary } from \"../hooks/useSessionSummary\";\nimport { useUserPreferences } from \"../hooks/useUserPreferences\";\nimport React from \"react\";\nimport LeftPanel from \"../components/layout/LeftPanel\";\nimport ChatPanel from \"../components/chat/ChatPanel\";\nimport RightPanel from \"../components/layout/RightPanel\";\nimport MobileLanding from \"./MobileLanding\";\nimport { useState, useEffect } from 'react';\n\nexport default function ThinkingPartnerPage() {\n  // ðŸ§  STATE OWNERSHIP LIVES HERE\n  const {\n    threads,\n    activeThread,\n    setActiveThreadId,\n    addThread,\n  } = useThreads();\n\n  const { session } = useCurrentSession(activeThread?.thread_id);\n  const { summary } = useSessionSummary(session?.session_id);\n  const preferences = useUserPreferences();\n\n  // show landing page first (left-panel style) on all viewports until user enters\n  const [entered, setEntered] = useState<boolean>(false);\n  const [rightOverlayOpen, setRightOverlayOpen] = useState<boolean>(false);\n  const [isNarrow, setIsNarrow] = useState<boolean>(false);\n\n  useEffect(() => {\n    function check() {\n      try { setIsNarrow(window.innerWidth <= 600); } catch (e) { setIsNarrow(false); }\n    }\n    check();\n    window.addEventListener('resize', check);\n    return () => window.removeEventListener('resize', check);\n  }, []);\n\n  return (\n    <div>\n      {!entered ? (\n        <MobileLanding threads={threads} onSelect={(tid) => { setActiveThreadId(tid); setEntered(true); }} />\n      ) : (\n        <div\n          className=\"app-layout\"\n          style={{\n            display: 'grid',\n            gridTemplateColumns: !isNarrow && rightOverlayOpen ? '1fr minmax(240px, 38vw)' : '1fr',\n            gap: 12,\n            alignItems: 'start',\n            padding: 0,\n            transition: 'grid-template-columns 260ms ease',\n          }}\n        >\n          {/* Chat column */}\n          <div style={{ padding: 12, minWidth: 0 }}>\n            <ChatPanel\n              activeThread={activeThread}\n              session={session}\n              preferences={preferences}\n              onOpenRight={() => setRightOverlayOpen((s) => !s)}\n            />\n          </div>\n\n          {/* Right panel behavior: side-by-side on wide screens, overlay on narrow */}\n          {!isNarrow ? (\n            rightOverlayOpen ? (\n              <div style={{ padding: 12, minWidth: 0 }}>\n                <RightPanel mode={session?.detected_mode} summary={summary} />\n              </div>\n            ) : null\n          ) : (\n            // on narrow screens, render overlay when open\n            rightOverlayOpen ? (\n              <div className=\"mobile-right-overlay\">\n                <div className=\"overlay open\" onClick={() => setRightOverlayOpen(false)} />\n                <div className=\"mobile-right-drawer\">\n                  <RightPanel mode={session?.detected_mode} summary={summary} />\n                  <div style={{ marginTop: 8 }}>\n                    <button className=\"prompt-btn\" onClick={() => setRightOverlayOpen(false)}>Close</button>\n                  </div>\n                </div>\n              </div>\n            ) : null\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
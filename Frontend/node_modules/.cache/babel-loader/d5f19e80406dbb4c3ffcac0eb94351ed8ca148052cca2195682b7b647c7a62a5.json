{"ast":null,"code":"import { sessions } from \"../data/sessions\";\nexport function useCurrentSession(activeThreadId) {\n  if (!activeThreadId) return {\n    session: null\n  };\n\n  // If the client is using an anonymous id (incognito/new user), don't surface\n  // the demo session history; treat as a fresh session. Persisted or logged-in\n  // users (non-anon ids) will still see existing session data.\n  try {\n    const uid = typeof window !== \"undefined\" ? localStorage.getItem(\"user_id\") : null;\n    if (!uid || uid.startsWith(\"anon_\")) {\n      return {\n        session: null\n      };\n    }\n  } catch (e) {\n    // if localStorage isn't available, fall back to showing nothing\n    return {\n      session: null\n    };\n  }\n\n  // For now: most recent session for thread\n  const session = [...sessions].filter(s => s.thread_id === activeThreadId).sort((a, b) => a.start_time < b.start_time ? 1 : -1)[0];\n  return {\n    session\n  };\n}","map":{"version":3,"names":["sessions","useCurrentSession","activeThreadId","session","uid","window","localStorage","getItem","startsWith","e","filter","s","thread_id","sort","a","b","start_time"],"sources":["/Users/ankurporwal/Documents/AIConsultation/Frontend/src/hooks/useCurrentSession.ts"],"sourcesContent":["import { sessions } from \"../data/sessions\";\nimport { Session } from \"../types/thinking\";\n\nexport function useCurrentSession(activeThreadId?: string) {\n  if (!activeThreadId) return { session: null };\n\n  // If the client is using an anonymous id (incognito/new user), don't surface\n  // the demo session history; treat as a fresh session. Persisted or logged-in\n  // users (non-anon ids) will still see existing session data.\n  try {\n    const uid = typeof window !== \"undefined\" ? localStorage.getItem(\"user_id\") : null;\n    if (!uid || uid.startsWith(\"anon_\")) {\n      return { session: null };\n    }\n  } catch (e) {\n    // if localStorage isn't available, fall back to showing nothing\n    return { session: null };\n  }\n\n  // For now: most recent session for thread\n  const session: Session | undefined = [...sessions]\n    .filter((s) => s.thread_id === activeThreadId)\n    .sort((a, b) => (a.start_time < b.start_time ? 1 : -1))[0];\n\n  return { session };\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,kBAAkB;AAG3C,OAAO,SAASC,iBAAiBA,CAACC,cAAuB,EAAE;EACzD,IAAI,CAACA,cAAc,EAAE,OAAO;IAAEC,OAAO,EAAE;EAAK,CAAC;;EAE7C;EACA;EACA;EACA,IAAI;IACF,MAAMC,GAAG,GAAG,OAAOC,MAAM,KAAK,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,GAAG,IAAI;IAClF,IAAI,CAACH,GAAG,IAAIA,GAAG,CAACI,UAAU,CAAC,OAAO,CAAC,EAAE;MACnC,OAAO;QAAEL,OAAO,EAAE;MAAK,CAAC;IAC1B;EACF,CAAC,CAAC,OAAOM,CAAC,EAAE;IACV;IACA,OAAO;MAAEN,OAAO,EAAE;IAAK,CAAC;EAC1B;;EAEA;EACA,MAAMA,OAA4B,GAAG,CAAC,GAAGH,QAAQ,CAAC,CAC/CU,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACC,SAAS,KAAKV,cAAc,CAAC,CAC7CW,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAMD,CAAC,CAACE,UAAU,GAAGD,CAAC,CAACC,UAAU,GAAG,CAAC,GAAG,CAAC,CAAE,CAAC,CAAC,CAAC,CAAC;EAE5D,OAAO;IAAEb;EAAQ,CAAC;AACpB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}